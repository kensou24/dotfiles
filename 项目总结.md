# Dotfiles 项目总结

## 📋 项目概述

这是一个基于 Deno TypeScript 构建的现代化 dotfiles 管理系统，提供跨平台（macOS、Linux、Windows）的 Shell 配置安全安装功能，具有自动备份和回滚能力。

## 🏗️ 项目架构

### 核心技术栈

- **运行时**: Deno (现代 TypeScript/JavaScript 运行时)
- **包管理**: JSR (JavaScript Registry) - 使用 @std/* 标准库
- **文档**: Docusaurus v3.8.1 - 部署到 GitHub Pages
- **CI/CD**: GitHub Actions 自动化工作流

### 主要特性

- ✅ **安全安装**: 安装前自动备份现有配置
- ✅ **跨平台支持**: 支持 macOS、Linux、Windows
- ✅ **多 Shell 支持**: Bash、Zsh 配置管理
- ✅ **回滚机制**: 时间戳备份，支持完整回滚
- ✅ **Claude AI 集成**: 100+ 智能命令，支持并行执行
- ✅ **编辑器集成**: VS Code、Zed、Cursor 配置
- ✅ **文档站点**: 完整的在线文档和指南

## 📁 目录结构

```
dotfiles/
├── 📂 scripts/              # Deno TypeScript 核心脚本
│   ├── install-safely.ts    # 主安装脚本（带备份）
│   ├── rollback.ts          # 回滚脚本
│   ├── integration-test.ts  # 集成测试
│   └── ci-environment-check.ts # CI 环境检查
├── 📂 claude/               # Claude AI 配置
│   ├── commands/            # 100+ 分类命令
│   │   ├── git/            # Git 操作命令
│   │   ├── test/           # 测试相关命令
│   │   ├── code/           # 代码分析命令
│   │   ├── ops/            # DevOps 命令
│   │   └── security/       # 安全审计命令
│   └── agents/             # 专业化 AI 代理
├── 📂 shell/               # Shell 配置文件
│   ├── bash/               # Bash 配置
│   ├── zsh/                # Zsh 配置
│   └── common/             # 通用脚本
├── 📂 docs/                # Docusaurus 文档站点
├── 📂 tools/               # 用户工具脚本
└── 📂 editor-configs/      # 编辑器配置
    ├── vscode/
    ├── zed/
    └── cursor/
```

## 🚀 核心功能

### 1. 安全安装系统

```bash
# 安装 dotfiles（自动备份）
deno task install

# 强制安装（覆盖现有配置）
deno task install:force

# 回滚到备份
deno task rollback
```

### 2. Claude AI 智能命令系统

- **100+ 专业命令**: 分类组织的智能命令
- **并行执行**: 支持 8-10 个子代理并行工作
- **动态上下文**: 实时注入 Git 状态、文件内容等
- **Hook 支持**: 自动格式化、测试、通知等

## 📋 Claude AI 智能命令详细列表

系统包含 100+ 专业命令，按功能域分类组织，支持并行执行和动态上下文注入。

### 🔧 Git 操作命令 (Git/)

| 命令                       | 功能描述                   | 基础用法                                                       |
| -------------------------- | -------------------------- | -------------------------------------------------------------- |
| `/commit`                  | 智能生成符合规范的提交信息 | 自动分析当前变更，生成符合 Conventional Commits 规范的提交信息 |
| `/commit-push`             | 提交并推送到远程仓库       | 自动提交更改并推送到对应的远程分支                             |
| `/pr-create`               | 创建 Pull Request          | 智能分析代码变更，生成 PR 标题、描述和标签                     |
| `/pr-check`                | 检查 PR 状态和质量         | 验证 PR 的完整性，检查测试状态和代码质量                       |
| `/pr-update`               | 更新现有 PR                | 根据最新变更更新 PR 描述和相关信息                             |
| `/pr-review`               | 执行 PR 代码审查           | 自动化代码审查，提供改进建议和安全检查                         |
| `/merge-main`              | 合并主分支变更             | 安全地将主分支最新变更合并到当前分支                           |
| `/resolve-merge-conflicts` | 解决合并冲突               | 智能分析和解决 Git 合并冲突                                    |
| `/review-git`              | Git 历史和变更审查         | 分析提交历史、变更模式和代码质量趋势                           |

### 🧪 测试相关命令 (Test/)

| 命令              | 功能描述         | 基础用法                                       |
| ----------------- | ---------------- | ---------------------------------------------- |
| `/generate-tests` | 自动生成测试用例 | 为指定代码生成单元测试、集成测试和边界案例测试 |
| `/coverage`       | 分析测试覆盖率   | 生成详细的测试覆盖率报告和改进建议             |
| `/debug`          | 调试测试失败     | 分析测试失败原因，提供修复建议                 |
| `/flaky-fix`      | 修复不稳定测试   | 识别和修复随机失败的测试用例                   |
| `/load-test`      | 负载测试         | 生成性能测试和负载测试脚本                     |
| `/validate`       | 验证测试质量     | 检查测试的完整性、覆盖度和最佳实践合规性       |
| `/tdd`            | 测试驱动开发     | 支持 TDD 工作流，先写测试再写实现              |

### 💻 代码分析与重构命令 (Code/)

| 命令              | 功能描述         | 基础用法                             |
| ----------------- | ---------------- | ------------------------------------ |
| `/dependencies`   | 分析项目依赖关系 | 检查依赖安全性、版本冲突和更新建议   |
| `/bottleneck`     | 性能瓶颈分析     | 识别代码中的性能热点和优化机会       |
| `/bug-fix`        | 智能错误修复     | 分析错误模式，提供修复建议和预防措施 |
| `/technical-debt` | 技术债务评估     | 识别代码异味、复杂度问题和重构机会   |
| `/migrate`        | 代码迁移助手     | 协助框架、语言或架构迁移             |
| `/deno-ify`       | 转换为 Deno 项目 | 将 Node.js 项目迁移到 Deno 生态系统  |
| `/api`            | API 代码生成     | 生成 REST/GraphQL API 接口和文档     |
| `/simplify`       | 代码简化         | 简化复杂逻辑，提高代码可读性         |
| `/refactor`       | 智能重构         | 识别重构机会并应用最佳实践           |
| `/standardize`    | 代码标准化       | 统一代码风格和项目规范               |
| `/related`        | 查找相关代码     | 发现代码依赖关系和相关组件           |

### 🔍 分析与研究命令 (Analyze/)

| 命令                  | 功能描述     | 基础用法                             |
| --------------------- | ------------ | ------------------------------------ |
| `/elaborate`          | 深度代码分析 | 详细分析代码结构、设计模式和架构决策 |
| `/schema`             | 数据模式分析 | 分析数据库模式、API 模式和数据结构   |
| `/map`                | 代码地图生成 | 生成项目结构图和组件关系图           |
| `/visualize`          | 数据可视化   | 创建数据流图、架构图和性能图表       |
| `/deep-dive`          | 深度技术研究 | 对复杂技术问题进行深入研究和分析     |
| `/db-optimize`        | 数据库优化   | 分析数据库性能，提供优化建议         |
| `/investigate`        | 技术调研     | 全面调研技术方案、最佳实践和行业趋势 |
| `/deep-web-research`  | 深度网络研究 | 利用网络资源进行技术调研和对比分析   |
| `/quick-web-research` | 快速网络研究 | 快速获取技术信息和解决方案           |
| `/think`              | 深度思考分析 | 对复杂问题进行结构化思考和分析       |

### 🛡️ 安全审计命令 (Security/)

| 命令             | 功能描述     | 基础用法                               |
| ---------------- | ------------ | -------------------------------------- |
| `/audit`         | 综合安全审计 | 多维度安全扫描，包括代码、依赖和配置   |
| `/secrets-audit` | 敏感信息扫描 | 检测代码中的硬编码密钥、密码和敏感信息 |
| `/harden`        | 安全加固建议 | 提供系统和应用安全加固方案             |
| `/threat-model`  | 威胁建模     | 分析潜在安全威胁和攻击向量             |

### 🚀 DevOps 运维命令 (Ops/)

| 命令              | 功能描述         | 基础用法                              |
| ----------------- | ---------------- | ------------------------------------- |
| `/ci-gen`         | CI/CD 流水线生成 | 生成 GitHub Actions、GitLab CI 等配置 |
| `/deploy`         | 智能部署编排     | Kubernetes 部署管理和配置生成         |
| `/containerize`   | 容器化配置       | 生成 Docker 配置和容器化最佳实践      |
| `/monitor`        | 监控配置         | 设置应用监控、告警和指标收集          |
| `/infra-status`   | 基础设施状态     | 检查基础设施健康状态和资源使用        |
| `/health-check`   | 健康检查         | 生成应用健康检查和探针配置            |
| `/fedora-expert`  | Fedora 系统专家  | Fedora Linux 系统管理和优化           |
| `/perf`           | 性能优化         | 系统和应用性能分析优化                |
| `/benchmark`      | 基准测试         | 性能基准测试和对比分析                |
| `/observe`        | 可观测性配置     | 设置日志、指标和链路追踪              |
| `/project-status` | 项目状态报告     | 生成项目健康度和进展报告              |

### 📚 文档管理命令 (Docs/)

| 命令             | 功能描述       | 基础用法                                 |
| ---------------- | -------------- | ---------------------------------------- |
| `/generate-docs` | 自动生成文档   | 根据代码生成 API 文档、README 和用户指南 |
| `/docs-init`     | 文档系统初始化 | 设置文档结构和工具链                     |
| `/docs-add`      | 添加文档内容   | 添加新的文档章节和内容                   |
| `/docs-update`   | 更新文档       | 根据代码变更更新相关文档                 |
| `/explain`       | 代码解释文档   | 生成代码解释和技术说明文档               |

### 🏗️ 脚手架与生成命令 (Scaffold/)

| 命令                                | 功能描述             | 基础用法                       |
| ----------------------------------- | -------------------- | ------------------------------ |
| `/scaffold`                         | 项目脚手架生成       | 快速生成项目模板和基础结构     |
| `/generate-project-claude-settings` | 生成 Claude 项目配置 | 为项目生成定制化的 Claude 设置 |

### 🔧 工具命令 (Tool/)

| 命令        | 功能描述       | 基础用法                       |
| ----------- | -------------- | ------------------------------ |
| `/cpr`      | 代码复制与处理 | 智能代码片段复制和格式化       |
| `/zed-task` | Zed 编辑器任务 | 配置和管理 Zed 编辑器任务      |
| `/review`   | 代码审查工具   | 执行代码质量审查和改进建议     |
| `/diagram`  | 图表生成       | 生成架构图、流程图和关系图     |
| `/five`     | 快速五分钟任务 | 识别可在五分钟内完成的改进任务 |

### 📋 工作流管理命令 (Workflow/)

| 命令          | 功能描述     | 基础用法                     |
| ------------- | ------------ | ---------------------------- |
| `/epic`       | 史诗任务创建 | 创建和管理大型功能开发计划   |
| `/prototype`  | 原型开发     | 快速原型设计和验证           |
| `/plan`       | 项目规划     | 制定详细的开发计划和里程碑   |
| `/organize`   | 工作组织     | 整理代码结构和项目组织       |
| `/clean`      | 清理优化     | 清理冗余代码和优化项目结构   |
| `/integrate`  | 集成管理     | 管理组件集成和依赖关系       |
| `/release`    | 发布管理     | 管理版本发布和变更日志       |
| `/next-steps` | 下一步行动   | 识别下一步开发任务和优先级   |
| `/start`      | 工作流启动   | 启动新的开发工作流           |
| `/sync`       | 同步管理     | 同步代码、配置和依赖         |
| `/tldr`       | 快速总结     | 生成项目和代码的简要总结     |
| `/summary`    | 详细总结     | 生成详细的项目状态和进展总结 |
| `/options`    | 选项分析     | 分析技术选择和决策选项       |
| `/progress`   | 进度跟踪     | 跟踪项目进度和里程碑完成情况 |

### 🔍 上下文与智能搜索命令 (Context/)

| 命令            | 功能描述       | 基础用法                   |
| --------------- | -------------- | -------------------------- |
| `/load-context` | 加载项目上下文 | 智能加载项目相关上下文信息 |
| `/auto`         | 自动上下文分析 | 自动分析和提取项目上下文   |

### 🤖 智能代理命令 (Agent/)

| 命令                        | 功能描述         | 基础用法                   |
| --------------------------- | ---------------- | -------------------------- |
| `/agent-browser-automation` | 浏览器自动化代理 | 生成浏览器自动化脚本和测试 |
| `/agent-prep-merge`         | 合并准备代理     | 智能准备代码合并和冲突解决 |

### 🌐 GitHub 集成命令 (GitHub/)

| 命令                 | 功能描述        | 基础用法                           |
| -------------------- | --------------- | ---------------------------------- |
| `/github-codesearch` | GitHub 代码搜索 | 在 GitHub 中搜索相关代码和解决方案 |

### ☸️ Kubernetes 运维命令 (Kubernetes/)

| 命令         | 功能描述        | 基础用法                       |
| ------------ | --------------- | ------------------------------ |
| `/k8s-debug` | Kubernetes 调试 | 诊断和解决 Kubernetes 集群问题 |

### 🧠 元命令与反思 (Meta/)

| 命令                 | 功能描述     | 基础用法                       |
| -------------------- | ------------ | ------------------------------ |
| `/knowledge-extract` | 知识提取     | 从代码和文档中提取关键知识点   |
| `/ideate-commands`   | 命令创意生成 | 生成新的 Claude 命令创意和实现 |
| `/search-smart`      | 智能搜索     | 执行智能化的代码和信息搜索     |
| `/ideate-new`        | 新功能创意   | 为项目生成新功能和改进创意     |
| `/reflection`        | 反思与改进   | 对开发过程和决策进行反思分析   |
| `/translate`         | 多语言翻译   | 翻译文档和代码注释             |

## 🎯 命令使用特色

### 🔥 热门命令推荐

```bash
/commit          # 智能生成符合规范的提交信息
/pr-create       # 创建 Pull Request
/generate-tests  # 自动生成单元测试
/audit           # 安全审计
/refactor        # 代码重构建议
/investigate     # 技术方案调研
/deploy          # 智能部署编排
/plan            # 项目开发规划
```

### ⚡ 并行执行优势

- **8-10 个子代理并行**: 大多数命令支持多代理并行执行，实现 5-10x 性能提升
- **智能任务分解**: 自动将复杂任务分解为可并行执行的子任务
- **实时状态管理**: 通过会话状态文件跟踪执行进度和中间结果

### 🎯 动态上下文注入

- **实时 Git 状态**: 自动注入当前分支、提交历史、变更状态
- **项目信息**: 自动检测项目类型、依赖、配置文件
- **文件内容**: 按需读取相关文件内容作为上下文
- **环境信息**: 集成开发环境和工具链状态

### 🛡️ 安全与权限控制

每个命令都有明确定义的 `allowed-tools` 权限范围，确保：

- **最小权限原则**: 只允许执行必要的操作
- **工具范围限制**: 精确控制可使用的命令和参数
- **安全执行**: 防止意外的系统修改和数据泄露

### 3. 多平台 Shell 配置

自动配置的文件包括：

- `.zshrc`, `.bashrc`, `.bash_profile`
- `.aliases.sh`, `.exports.sh`, `.functions.sh`
- `.path.sh`, `.extra.sh`, `.platform.sh`
- `.vimrc`, `.tmux.conf`

### 4. 开发工具集成

- **VS Code**: 键绑定、设置、扩展配置
- **Zed**: 任务配置、键绑定
- **Cursor**: 智能代码助手配置
- **Git**: 全局配置和别名

## 🧪 测试与质量保证

```bash
# 运行集成测试
deno task test

# 类型检查
deno task check

# Pre-commit 检查
deno task pre-commit

# CI 环境验证
deno task ci:check
```

## 📚 文档系统

**在线文档**: https://wcygan.github.io/dotfiles/

```bash
# 启动文档开发服务器
deno task docs:dev

# 构建文档
deno task docs:build

# 部署文档
deno task docs:serve
```

文档内容包括：

- 📖 安装指南
- ⚙️ 配置说明
- 🔧 脚本参考
- 💡 最佳实践

## 🔧 主要命令

| 命令                   | 功能                 |
| ---------------------- | -------------------- |
| `deno task install`    | 安全安装 dotfiles    |
| `deno task test`       | 运行集成测试         |
| `deno task docs:dev`   | 启动文档开发服务器   |
| `deno task pre-commit` | 运行 pre-commit 检查 |
| `deno task ci:check`   | CI 环境验证          |

## 🌟 高级特性

### 1. 并行处理

- 使用 Claude AI 子代理实现 5-10x 性能提升
- 并行文件分析和处理
- 智能任务分解和调度

### 2. Git Worktree 支持

```bash
# 并行开发不同特性
git worktree add ../project-feature feature-branch
cd ../project-feature
claude code  # 独立的 Claude 会话
```

### 3. Hook 系统

- **PostToolUse**: 文件编辑后自动格式化
- **PreToolUse**: 执行前验证
- **Notification**: 任务完成通知

### 4. 安全机制

- 时间戳备份（精确到纳秒）
- 回滚验证
- 权限最小化原则
- 敏感信息保护

## 🎯 使用场景

1. **开发环境快速搭建**: 新机器一键配置完整开发环境
2. **团队配置标准化**: 统一的开发工具和 Shell 配置
3. **Claude AI 辅助开发**: 智能代码分析、重构、测试生成
4. **跨平台开发**: Windows、macOS、Linux 无缝切换
5. **DevOps 自动化**: CI/CD 集成、环境检查

## 📈 性能优势

- **并行执行**: 8-10 个 Claude 子代理同时工作
- **增量安装**: 只更新变更的配置文件
- **智能缓存**: 减少重复计算和网络请求
- **异步处理**: 非阻塞的文件操作

## 🔮 未来发展

- 更多编辑器支持（Neovim、Emacs）
- 容器化开发环境
- 云端配置同步
- 更多语言的 AI 命令支持
- 性能监控和分析

---

**项目维护者**: 活跃的开源社区\
**许可证**: 开源项目\
**部署**: GitHub Pages 自动部署\
**贡献**: 欢迎 Issue 和 Pull Request
